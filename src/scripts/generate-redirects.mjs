/* eslint-disable @typescript-eslint/restrict-template-expressions */
/* eslint-disable @typescript-eslint/no-unsafe-assignment */

// Generates the Netlify _redirects file from the moved files in the Git history.

import fs from 'fs/promises'

import redirects from './redirects.mjs'

const redirectLines = (await redirects()).map(({ source, destination }) => `${source} ${destination}`).join('\n')
const lines = `\n# Generated by generate-redirects.mjs from Git history\n${redirectLines}\n`

console.log('Redirects:\n', lines)

await fs.writeFile(new URL('../../out/_redirects', import.meta.url), lines)
